<main id="main" class="main">
  <section class="section gamedetails mb-3">
    <div class="row">
      <div class="col-md-12">
        <div class="row">
          <div class="col-md-6">
            <h4>
              <a routerLink="/book-management/net-exposure"
                ><i class="fa fa-1x fa-circle-chevron-left"></i
              ></a>
              {{ matchName }}
            </h4>
          </div>
          <div class="col-md-6 text-end">
            <p>
              <a class="text-decoration-none text-white">
                <input
                  type="radio"
                  checked=""
                  class="radioselected cursor-pointer"
                  id="html"
                  name="fav_language"
                  value="HTML"
                /><span class="rounded-pill p-2 m-2">My PT</span>
              </a>
              <a class="text-decoration-none text-white">
                <input
                  type="radio"
                  checked=""
                  class="radioselected cursor-pointer"
                  id="html"
                  name="fav_language"
                  value="HTML"
                /><span class="rounded-pill p-2 m-2">Total Book</span>
              </a>
            </p>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12">
            <div
              class="accordion"
              id="accordionExample"
              *ngFor="let singleAdminBook of adminBooksList"
            >
              <div class="accordion-item bg-transparent border-0">
                <h2 class="accordion-header" id="headingOne">
                  <a
                    class="text-decoration-none text-white w-100"
                    data-bs-toggle="collapse"
                    data-bs-target="#collapseOne"
                    aria-expanded="true"
                    aria-controls="collapseOne"
                  >
                    <div
                      class="row"
                      data-bs-toggle="collapse"
                      data-bs-target="#collapseOne"
                      aria-expanded="true"
                      aria-controls="collapseOne"
                    >
                      <div class="col-md-6">
                        <p>
                          <i class="fa fa-minus"></i>
                          <i class="fa fa-plus"></i>
                          {{ singleAdminBook["marketName"] }}
                        </p>
                      </div>
                    </div>
                  </a>
                </h2>
                <div
                  id="collapseOne"
                  class="accordion-collapse collapse show"
                  aria-labelledby="headingOne"
                  data-bs-parent="#accordionExample"
                >
                  <div class="accordion-body p-0">
                    <div class="row">
                      <div class="col-md-6">
                        <div class="bg-white h-100 border-5">
                          <table class="table tablematchodds bg-transparent">
                            <tbody>
                              <tr
                                *ngFor="
                                  let runner of singleAdminBook['adminBook']
                                "
                              >
                                <td class="text-start ps-2 heading border-top">
                                  <a href=""
                                    >{{ runner["RunnerName"] }} <br />
                                    <span class="text-success">Rs. 0</span></a
                                  >
                                </td>
                                <td class="colblue light">
                                  <a href=""
                                    ><strong>{{ runner["back2"] }}</strong>
                                    <br />{{
                                      runner["vback2"] | marketRateFormater
                                    }}</a
                                  >
                                </td>
                                <td class="colpink light">
                                  <a href=""
                                    ><strong>{{ runner["back1"] }}</strong>
                                    <br />{{
                                      runner["vback1"] | marketRateFormater
                                    }}</a
                                  >
                                </td>
                                <!-- <td class="colgray">-</td>
                              <td class="colgray">-</td> -->
                                <td class="colblue light">
                                  <a href=""
                                    ><strong>{{ runner["back0"] }}</strong>
                                    <br />{{
                                      runner["vback0"] | marketRateFormater
                                    }}</a
                                  >
                                </td>
                                <td class="colpink light">
                                  <a href=""
                                    ><strong>{{ runner["lay0"] }}</strong>
                                    <br />{{
                                      runner["vlay0"] | marketRateFormater
                                    }}</a
                                  >
                                </td>

                                <td class="colblue light">
                                  <a href=""
                                    ><strong>{{ runner["lay1"] }}</strong>
                                    <br />{{
                                      runner["vlay1"] | marketRateFormater
                                    }}</a
                                  >
                                </td>

                                <td class="colpink light">
                                  <a href=""
                                    ><strong>{{ runner["lay2"] }}</strong>
                                    <br />{{
                                      runner["vlay2"] | marketRateFormater
                                    }}</a
                                  >
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="bg-white h-100 border-5">
                          <table class="table bg-transparent align_thead">
                            <thead>
                              <tr>
                                <th></th>
                                <th></th>
                                <th>Stakes</th>
                                <th>1</th>
                                <th>X</th>
                                <th>2</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr
                                *ngFor="
                                  let userBook of singleAdminBook['userBook']
                                "
                              >
                                <td class="border-top">
                                  {{ userBook["username"] }}
                                </td>
                                <td class="border-top">
                                  <img
                                    src="/assets/images/net_expo.png"
                                    width="12"
                                  />
                                </td>
                                <td class="text-success border-top">
                                  Rs. {{ userBook["stake"] }}
                                </td>
                                <td class="text-success border-top">
                                  Rs. {{ userBook["runner1"] }}
                                </td>
                                <td class="text-success border-top">
                                  Rs. {{ userBook["runner2"] }}
                                </td>
                                <td class="text-success border-top">
                                  Rs. {{ userBook["runner3"] }}
                                </td>
                              </tr>

                              <tr>
                                <td></td>

                                <td class="border-top">1</td>

                                <td class="text-success border-top text-danger">
                                  2
                                </td>
                                <td class="text-success border-top text-danger">
                                  3
                                </td>
                                <td class="text-success border-top text-danger">
                                  4
                                </td>
                                <td class="text-success border-top text-danger">
                                  5
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="section gamedetails mt-3 mb-3">
    <input
      type="text"
      class="form-control bg-dark text-white radius-left-tb border-pink radius-right-tb"
      placeholder="Search Member Name"
      aria-label="Search"
      aria-describedby="addon-wrapping"
      [(ngModel)]="searchTerm"
      (ngModelChange)="search()"
    />
    <div class="col-md-12 text-end">Bet Count : {{ viewTotal.length }}</div>
    <div class="col-md-12 overflow-auto">
      <table class="table tableall m-0">
        <thead>
          <tr>
            <th scope="col" class="first">#</th>
            <th scope="col">Member</th>
            <th scope="col">Place time</th>
            <th scope="col-2">Events</th>
            <th scope="col">Market</th>
            <th scope="col">Selection</th>
            <th scope="col">Odds Placed</th>
            <th scope="col">Odds Matched</th>
            <th scope="col">Matched</th>
            <th scope="col">Unmatched</th>
            <th scope="col">Profit/Liability</th>
            <th scope="col" class="last text-center">IP</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let viewTotalEach of viewTotal; let i = index">
            <td class="col">{{ i + 1 }}</td>
            <td class="col">{{ viewTotalEach.userName }}</td>
            <td class="col">
              {{ viewTotalEach.placedDate | date : "mediumTime" }}
            </td>
            <td class="col">{{ viewTotalEach.event | truncate : 33 }}</td>
            <td class="col">
              <span
                *ngIf="!viewTotalEach.isBack"
                class="border bg-danger text-danger border-danger me-2"
              ></span>
              <span
                *ngIf="viewTotalEach.isBack"
                class="border bg-primary text-primary border-primary me-2"
              ></span>
              {{ viewTotalEach.marketName }}
            </td>
            <td class="col">{{ viewTotalEach.selectionName }}</td>
            <td class="col">{{ viewTotalEach.betRate }}</td>
            <td class="col">{{ viewTotalEach.betRate }}</td>
            <td class="col">
              <ng-container *ngIf="viewTotalEach.isMatched; else notMatched">
                {{ viewTotalEach.stake }}
              </ng-container>
              <ng-template #notMatched> -- </ng-template>
            </td>
            <td class="text-danger col">
              <ng-container *ngIf="!viewTotalEach.isMatched; else notMatched">
                {{ viewTotalEach.stake }}
              </ng-container>
              <ng-template #notMatched> -- </ng-template>
            </td>
            <td
              class="col"
              [ngClass]="viewTotalEach.isBack ? 'text-danger' : 'text-success'"
            >
              <strong>{{ viewTotalEach.profitLiability }}</strong>
            </td>
            <td class="col">
              <small>{{ viewTotalEach.IP }}</small>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>

  <div *ngIf="viewTotal.length == 0" class="border text-center p-5">
    <h4 *ngIf="viewTotal.length == 0 && !isLoading">No data found</h4>
    <h4 *ngIf="isLoading">Loading...</h4>
  </div>
  <div class="row">
    <div class="col-md-12">
      <div *ngIf="viewTotal.length > 0 && !this.isLoading">
        <button
          class="btn rounded-pill text-white"
          [disabled]="currentPage === 1"
          (click)="prev()"
        >
          Prev
        </button>
        <span class="btn btn-pink rounded-pill ps-4 pe-4"
          >{{ currentPage }} / {{ totalPages }}
        </span>
        <button
          class="btn rounded-pill text-white"
          [disabled]="currentPage === totalPages"
          (click)="next()"
        >
          Next
        </button>
      </div>
    </div>
  </div>
</main>
