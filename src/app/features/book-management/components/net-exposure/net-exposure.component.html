<main id="main" class="main m-0">
  <section class="section gamedetails">
    <div class="row">
      <div class="col-md-12">
        <!--your code will come here start-->
        <h4 class="text-pink">Net Exposure</h4>
        <div class="row" [formGroup]="filterForm">
          <div class="col-md-8 col-12  net_exposure">
            <div class="row">
              <div class="col-md-4">
                <a class="text-decoration-none text-white">
                  <input type="radio" (click)="
                      onFilterChange({ clicked: 'type', selectedType: 'MyPT' })
                    " formControlName="selectedType" class="radioselected pointer" id="html" name="selectedType"
                    value="MyPT" /><span class="rounded-pill p-2">My PT</span>
                </a>
                <a class="text-decoration-none text-white">
                  <input value="totalBook" (click)="
                      onFilterChange({ clicked: 'type', selectedType: 'TotalBook' })
                    " formControlName="selectedType" type="radio" id="html" checked name="selectedType"
                    value="TotalBook" class="pointer radioselected" /><span class="rounded-pill p-2">Total
                    Book</span>
                </a>
              </div>

              <div class="col-md-8 my-3 my-md-0">
                <div class="row">
                  
                  <div class="col-md-12">
                    <span class=" pt-2 me-3"><strong>Filter by Sport :</strong></span>
                    <a class="text-decoration-none text-white">
                      <input (click)="
                      onFilterChange({
                        clicked: 'sport',
                        sportId: null,
                        refreshCallVar: false
                      })
                    " type="radio" checked="true" class="radioselected pointerr" id="html" name="sport"
                        value="All" /><span class="rounded-pill p-2">All</span>
                    </a>
                    <a *ngFor="let game of games" class="text-decoration-none text-white">
                      <input (click)="
                      onFilterChange({
                        clicked: 'sport',
                        sportId: game.sportId,
                        refreshCallVar: false
                      })
                    " type="radio" class="radioselected pointer" id="html" name="sport" [value]="game.sportId" /><span
                        class="rounded-pill p-2">{{ game.sportName }}</span>
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="col-md-4">
            <div class="row">
              <div class="col-md-6 col-6 pointer">
                <select name="matchId" formControlName="matchId" id="ab" class="form-select pointer p-0"
                  (change)="onFilterChangeDropDown($event)" data-clicked="match">
                  <option value="null" class="pointer">All</option>
                  <option class="pointer" value="{{ match.matchId }}" *ngFor="let match of matchList">
                    {{ match.matchName }}
                  </option>
                </select>
              </div>
              <div class="col-md-6 col-6 text-end">
                {{ refreshCount }} &nbsp;
                <button class="btn btn-pink rounded-pill " (click)="refreshCall()">
                  <i class="fa fa-redo-alt disnone"></i> Refresh
                </button>
              </div>
            </div>
          </div>

          <div class="col-md-12 mt-3" *ngIf="booksForBackend.length == 0">
            <div class="border text-center p-5">
              <h4 *ngIf="isLoading">Loading...</h4>
              <h4 *ngIf="booksForBackend.length == 0 && !isLoading">
                No data found
              </h4>
            </div>
          </div>
        </div>

        <div class="row">
          <div *ngIf="booksForBackend.length > 0" class="col-md-12 overflow-auto">
            <table class="table tableall mt-3 align_thead mb-0" *ngFor="let book of booksForBackend">
              <thead>
                <!-- <tr>
                  <th width="30%" class="text-start">{{ book.matchName }}</th>
                  <th width="20%">
                    <a
                      (click)="
                        redirectUrl(book.data)
                      "
                      class="btn btn-warning rounded-pill"
                    >
                      View total</a
                    >
                  </th>
                  <th width="20%">Net Exposure</th>
                  <th width="10%">1</th>
                  <th width="10%">X</th>
                  <th width="10%">2</th>

                </tr> -->
                <tr class="bookmatch">
                  <th class="text-start first">
                    <span>{{ book.matchName }}</span>
                  </th>
                  <th>
                    <a (click)="redirectUrlByMatch(book)" class="btn btn-warning rounded-pill">
                      View total</a>
                  </th>
                  <th>Net Exposure</th>
                  <th>1</th>
                  <th>X</th>
                  <th class="last">2</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let data of book.data">
                  <td>
                    <span>{{ data.marketName }}</span>
                  </td>
                  <td>
                    <a (click)="redirectUrlByMarket([data])" class="pointer">
                      <img src="../../../../../assets/images/net_exposure.png" width="22px" alt="" /></a>
                  </td>
                  <td>
                    <a class="btn rounded-pill alert alert-danger pt-2 pb-2 w-100 text-danger">
                      <span [ngClass]="
                          data.netExposure > 0 ? 'text-success' : 'text-danger'
                        ">{{ data.netExposure | number: '1.0-0' }}</span>
                    </a>
                  </td>
                  <td>
                    <a *ngIf="data.horses[0]?.finalAmount > 0"
                      class="btn rounded-pill alert alert-success pt-2 pb-2 w-100">
                      <span class="text-success">
                        {{
                        data.horses[0]?.finalAmount
                        ? (data.horses[0]?.finalAmount | number: '1.0-0')
                        : 0
                        }}
                      </span>
                    </a>
                    <a *ngIf="data.horses[0]?.finalAmount < 0"
                      class="btn rounded-pill alert alert-danger pt-2 pb-2 w-100">
                      <span class="text-danger">
                        {{
                        data.horses[0]?.finalAmount
                        ? (data.horses[0]?.finalAmount | number: '1.0-0')
                        : 0
                        }}
                      </span>
                    </a>
                    <a *ngIf="data.horses[0]?.finalAmount == 0" class="btn rounded-pill alert pt-2 pb-2 w-100">
                      <span class="text-white"> 0 </span>
                    </a>
                  </td>
                  <td>
                    <ng-container *ngIf="data.horses[2]">
                      <a *ngIf="data.horses[2].finalAmount > 0"
                        class="btn rounded-pill alert alert-success pt-2 pb-2 w-100">
                        <span class="text-success">
                          {{
                          data.horses[2]?.finalAmount
                          ? (data.horses[2]?.finalAmount | number: '1.0-0')
                          : 0
                          }}
                        </span>
                      </a>
                      <a *ngIf="data.horses[2].finalAmount < 0"
                        class="btn rounded-pill alert alert-danger pt-2 pb-2 w-100">
                        <span class="text-danger">
                          {{
                          data.horses[2]?.finalAmount
                          ? (data.horses[2]?.finalAmount | number: '1.0-0')
                          : 0
                          }}
                        </span>
                      </a>
                      <a *ngIf="data.horses[2].finalAmount == 0" class="btn rounded-pill alert pt-2 pb-2 w-100">
                        <span class="text-white"> 0 </span>
                      </a>
                    </ng-container>
                  </td>
                  <td>
                    <a *ngIf="data.horses[1]?.finalAmount < 0"
                      class="btn rounded-pill alert alert-danger pt-2 pb-2 w-100">
                      <span class="text-danger">{{
                        data.horses[1]?.finalAmount
                        ? (data.horses[1]?.finalAmount | number: '1.0-0')
                        : 0
                        }}</span>
                    </a>

                    <a *ngIf="data.horses[1]?.finalAmount > 0"
                      class="btn rounded-pill alert alert-success pt-2 pb-2 w-100">
                      <span class="text-success">{{
                        data.horses[1]?.finalAmount
                        ? (data.horses[1]?.finalAmount | number: '1.0-0')
                        : 0
                        }}</span>
                    </a>

                    <a *ngIf="data.horses[1]?.finalAmount == 0" class="btn rounded-pill alert pt-2 pb-2 w-100">
                      <span class="text-white">0</span>
                    </a>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </section>
</main>