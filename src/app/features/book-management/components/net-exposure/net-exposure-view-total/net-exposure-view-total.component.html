<main id="main" class="main m-0">
  <section class="section  mb-3">
    <div class="row">
      <div class="col-md-12">
        <div class="row">
          <div class="col-md-5">
            <h6>
              <a routerLink="/book-management/net-exposure"><i class="fa fa-1x fa-circle-chevron-left"></i></a>
              {{ matchName }}
            </h6>
          </div>
          <div class="col-md-4 text-end">
            <p>
              <a class="text-decoration-none text-white">
                <input type="radio" class="radioselected cursor-pointer" id="html" name="fav_language" value="HTML"
                  (click)="onFilterChange(true)" /><span class="rounded-pill p-2 m-2">My PT</span>
              </a>
              <a class="text-decoration-none text-white">
                <input type="radio" checked class="radioselected cursor-pointer" id="html" name="fav_language"
                  value="HTML" (click)="onFilterChange(false)" /><span class="rounded-pill p-2 m-2">Total Book</span>
              </a>
            </p>
          </div>
          <div class="col-md-3 text-end">
            {{ refreshCount }} &nbsp;
            <button class="btn btn-pink rounded-pill ps-4 pe-4" (click)="refreshCall()">
              <i class="fa fa-redo-alt disnone"></i> Refresh
            </button>
            <button class="btn btn-pink rounded-pill ps-4 pe-4 ms-2" (click)="hideShowTV()">
              <i [ngClass]="isTVEnable ? 'fa fa-xmark' : 'fa fa-play'"></i>&nbsp;{{ isTVEnable ? "HIDE" : "WATCH" }}
            </button>
          </div>

          <div class="col-md-12" *ngIf="liveStreamingTVUrl" id="videoplayer">

            <iframe [src]="
                  sanitizer.bypassSecurityTrustResourceUrl(liveStreamingTVUrl)
                " scrolling="no"></iframe>

          </div>
        </div>
        <!-- <div class="row">
          <div class="col-md-6"></div>
          
        </div> -->

        <div class="row">
          <div class="col-md-12 ">
            <div class="accordion" id="accordionExample" *ngFor="let singleAdminBook of adminBooksList; let i = index">
              <div class="accordion-item bg-transparent border-0">
                <h2 class="accordion-header" id="headingOne">
                  <a class="text-decoration-none text-white w-100" data-bs-toggle="collapse"
                    data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                    <div class="row" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true"
                      aria-controls="collapseOne">
                      <div class="col-md-6">
                        <p class="mt-3 mb-1">
                          <i class="fa fa-minus"></i>
                          <i class="fa fa-plus"></i>
                          {{ singleAdminBook["marketName"] }}
                        </p>
                      </div>
                    </div>
                  </a>
                </h2>
                <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne"
                  data-bs-parent="#accordionExample">
                  <div class="accordion-body p-0">
                    <div class="row">
                      <div class="col-md-6">
                        <div class="bg-white border-5 overflow-auto">
                          <table class="table tablematchodds bg-transparent">
                            <tbody>
                              <ng-container *ngIf="
                                  singleAdminBook['marketTypName'] ==
                                  'Match Odds'
                                ">
                                <tr *ngFor="
                                    let runner of singleAdminBook['adminBook'];let last = last;let first = first
                                  ">
                                  <td class="text-start ps-2 heading border-top">
                                    <a href=""><strong>{{ runner["RunnerName"] }} </strong>

                                      <br />
                                      <p class="mb-0 mt-1">
                                        <span [ngClass]="
                                            runner['amount'] <= 0
                                              ? 'text-danger'
                                              : 'text-success'
                                          " class="text-success"><strong class="exposure-font">{{
                                            runner["amount"] | number: '1.0-0'
                                          }}</strong></span>
                                      </p>
                                    </a>
                                  </td>
                                  <td *ngIf="
                                  singleAdminBook['appMarketStatus'] !=
                                        '3' &&
                                        singleAdminBook['appMarketStatus'] != '9'
                                    " class="colblue" [boxHighlight]="runner['back2']"
                                    [boxHighlight]="runner['vback2']">
                                    <a><strong>{{ runner["back2"] }}</strong>
                                      <br />
                                      <span>{{
                                        runner["vback2"] | marketRateFormater
                                      }}</span></a>
                                  </td>
                                  <td *ngIf="
                                  singleAdminBook['appMarketStatus'] !=
                                        '3' &&
                                        singleAdminBook['appMarketStatus'] != '9'
                                    " class="colblue" [boxHighlight]="runner['back1']"
                                    [boxHighlight]="runner['vback1']">
                                    <a><strong>{{ runner["back1"] }}</strong>
                                      <br /><span>{{
                                        runner["vback1"] | marketRateFormater
                                      }}</span></a>
                                  </td>
                                  <!-- <td class="colgray">-</td>
                                <td class="colgray">-</td> -->
                                  <td *ngIf="
                                  singleAdminBook['appMarketStatus'] !=
                                        '3' &&
                                        singleAdminBook['appMarketStatus'] != '9'
                                    " class="colblue" [boxHighlight]="runner['back0']"
                                    [boxHighlight]="runner['vback0']">
                                    <a><strong>{{ runner["back0"] }}</strong>
                                      <br /><span>{{
                                        runner["vback0"] | marketRateFormater
                                      }}</span></a>
                                  </td>
                                  <td *ngIf="
                                  singleAdminBook['appMarketStatus'] !=
                                        '3' &&
                                        singleAdminBook['appMarketStatus'] != '9'
                                    " class="colpink" [boxHighlight]="runner['lay0']" [boxHighlight]="runner['vlay0']">
                                    <a><strong>{{ runner["lay0"] }}</strong>
                                      <br /><span>{{
                                        runner["vlay0"] | marketRateFormater
                                      }}</span></a>
                                  </td>

                                  <td *ngIf="
                                  singleAdminBook['appMarketStatus'] !=
                                        '3' &&
                                        singleAdminBook['appMarketStatus'] != '9'
                                    " class="colpink" [boxHighlight]="runner['lay1']" [boxHighlight]="runner['vlay1']">
                                    <a><strong>{{ runner["lay1"] }}</strong>
                                      <br /><span>{{
                                        runner["vlay1"] | marketRateFormater
                                      }}</span></a>
                                  </td>

                                  <td *ngIf="
                                  singleAdminBook['appMarketStatus'] !=
                                        '3' &&
                                        singleAdminBook['appMarketStatus'] != '9'
                                    " class="colpink" [boxHighlight]="runner['lay2']" [boxHighlight]="runner['vlay2']">
                                    <a><strong>{{ runner["lay2"] }}</strong>
                                      <br /><span>{{
                                        runner["vlay2"] | marketRateFormater
                                      }}</span></a>
                                  </td>
                                  <td class="border-top" [ngClass]="{ 'border-top': !first }">
                                    <div class="suspendedbm1" *ngIf="
                                    singleAdminBook['appMarketStatus'] ==
                                          '3' ||
                                          singleAdminBook['appMarketStatus'] == '9'
                                      ">
                                      <button type="button" class="suspendedm1">
                                        {{
                                          singleAdminBook["appMarketStatus"] ==
                                        "3"
                                        ? "Suspended"
                                        : "Ball Running"
                                        }}
                                      </button>
                                    </div>
                                  </td>
                                </tr>
                              </ng-container>
                              <ng-container *ngIf="
                                  singleAdminBook['marketTypName'] ==
                                  'Bookmaker'
                                ">
                                <tr *ngFor="
                                    let runner of singleAdminBook['adminBook'];let last = last;let first = first
                                  ">
                                  <td class="text-start ps-2 heading border-top">
                                    <a><strong>{{
                                        runner["RunnerName"]
                                      }}</strong>
                                      <br />
                                      <span [ngClass]="
                                          runner['amount'] <= 0
                                            ? 'text-danger'
                                            : 'text-success'
                                        ">
                                        <strong class="exposure-font">{{
                                          runner["amount"] | number: '1.0-0'
                                        }}</strong></span>
                                    </a>
                                  </td>
                                  <td class="border-top">
                                    <a><strong></strong> <br /></a>
                                  </td>
                                  <td class="border-top">
                                    <a><strong></strong> <br /></a>
                                  </td>
                                  <!-- <td class="colgray">-</td>
                                <td class="colgray">-</td> -->
                                  <td *ngIf="
                                  singleAdminBook['appMarketStatus'] !=
                                        '3' &&
                                        singleAdminBook['appMarketStatus'] != '9'
                                    " class="colblue" [boxHighlight]="runner['back1']"
                                    [boxHighlight]="runner['vback1']">
                                    <a><strong
                                        *ngIf='runner["back1"]'>{{ (runner["back1"]-1)*100 | number: '1.0-0' }}</strong>
                                      <br /><span *ngIf='runner["vback1"]'>{{
                                        runner["vback1"] | marketRateFormater
                                      }}</span></a>
                                  </td>
                                  <td *ngIf="
                                  singleAdminBook['appMarketStatus'] !=
                                        '3' &&
                                        singleAdminBook['appMarketStatus'] != '9'
                                    " class="colpink" [boxHighlight]="runner['lay1']" [boxHighlight]="runner['vlay1']">
                                    <a><strong
                                        *ngIf='runner["lay1"]'>{{ (runner["lay1"]-1)*100 | number: '1.0-0'}}</strong>
                                      <br /><span *ngIf='runner["vlay1"]'>{{
                                        runner["vlay1"] | marketRateFormater
                                      }}</span></a>
                                  </td>
                                  <td class="border-top" [ngClass]="{ 'border-top': !first }">
                                    <div class="suspendedbm1" *ngIf="
                                    singleAdminBook['appMarketStatus'] ==
                                          '3' ||
                                          singleAdminBook['appMarketStatus'] == '9'
                                      ">
                                      <button type="button" class="suspendedm1">
                                        {{
                                          singleAdminBook["appMarketStatus"] ==
                                        "3"
                                        ? "Suspended"
                                        : "Ball Running"
                                        }}
                                      </button>
                                    </div>
                                  </td>

                                </tr>
                              </ng-container>

                              <ng-container *ngIf="
                                  singleAdminBook['marketTypName'] == 'Fancy'
                                ">

                                <tr *ngFor="
                                    let runner of singleAdminBook['adminBook'];let last = last;let first = first
                                  ">
                                  <td class="text-start ps-2 heading border-top">
                                    <a><strong>{{ runner["RunnerName"] }}</strong><br /><br>
                                      <span [ngClass]="
                                          runner['amount'] <= 0
                                            ? 'text-danger'
                                            : 'text-success'
                                        ">
                                        <strong class="exposure-font"> {{
                                          runner["amount"] | number: '1.0-0'
                                        }}</strong>
                                      </span>

                                    </a>
                                  </td>
                                  <td>
                                    <a><strong></strong> <br /></a>
                                  </td>
                                  <td>
                                    <a><strong></strong> <br /></a>
                                  </td>
                                  <td width="10%" class="border-top" [ngClass]="{ 'border-top': !first }">
                                    <a data-bs-toggle="modal" href="#exampleModalToggle" role="button"
                                      class="laddericon" (click)="
                                        getLadderDataByMarket(
                                          singleAdminBook['marketId']
                                        )
                                      ">
                                      <img src="/assets/images/ladder-icon.png" width="10px" />
                                    </a>
                                  </td>
                                  <!-- <td class="colgray">-</td>
                                <td class="colgray">-</td> -->

                                  <td *ngIf="
                                  singleAdminBook['appMarketStatus'] !=
                                        '3' &&
                                        singleAdminBook['appMarketStatus'] != '9'
                                    " class="colpink" [boxHighlight]="runner['lay1']" [boxHighlight]="runner['vlay1']">
                                    <a><strong>{{ runner["lay1"] }}</strong>
                                      <br />{{
                                        runner["vlay1"] | marketRateFormater
                                      }}</a>
                                  </td>
                                  <td *ngIf="
                                  singleAdminBook['appMarketStatus'] !=
                                        '3' &&
                                        singleAdminBook['appMarketStatus'] != '9'
                                    " class="colblue" [boxHighlight]="runner['back1']"
                                    [boxHighlight]="runner['vback1']">
                                    <a><strong>{{ runner["back1"] }}</strong>
                                      <br />{{
                                        runner["vback1"] | marketRateFormater
                                      }}</a>
                                  </td>

                                  <td class="border-top" [ngClass]="{ 'border-top': !first }">
                                    <div class="suspendedbm1" *ngIf="
                                    singleAdminBook['appMarketStatus'] ==
                                          '3' ||
                                          singleAdminBook['appMarketStatus'] == '9'
                                      ">
                                      <button type="button" class="suspendedm1">
                                        {{
                                          singleAdminBook["appMarketStatus"] ==
                                        "3"
                                        ? "Suspended"
                                        : "Ball Running"
                                        }}
                                      </button>
                                    </div>
                                  </td>
                                </tr>
                              </ng-container>
                            </tbody>
                          </table>
                        </div>
                      </div>
                      <div class="col-md-6 my-3 my-md-0">
                        <div class="bg-white border-5 overflow-auto">
                          <table class="table bg-transparent align_thead">
                            <thead>
                              <tr>
                                <th></th>
                                <th></th>
                                <th>Stakes</th>
                                <th>1</th>
                                <th>X</th>
                                <th>2</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr *ngFor="
                                  let userBook of singleAdminBook['userBook']
                                ">
                                <td class="col-1 border-top">
                                  <strong> {{ userBook["username"] }}</strong>
                                </td>
                                <td class="col-1 border-top" style="cursor: pointer;">
                                  <img src="/assets/images/net_expo.png" width="12" (click)="
                                      getTotalBookViewTotal(
                                        singleAdminBook['marketId'],
                                        singleAdminBook['isTotaltotalBookView']
                                      )
                                    " />
                                </td>
                                <td class="col-1 border-top">
                                  <strong>{{ userBook["stake"] }}</strong>
                                </td>
                                <td class="col-1 border-top">
                                  <strong class="text-success" *ngIf="userBook['runner1'] > 0">{{
                                      userBook["runner1"] | number: '1.0-0'
                                    }}</strong>
                                  <strong class="text-danger" *ngIf="userBook['runner1'] <= 0">{{
                                      userBook["runner1"] | number: '1.0-0'
                                    }}</strong>
                                </td>
                                <td class="col-1 border-top">
                                  <strong class="text-success" *ngIf="userBook['runner3'] > 0">{{
                                      userBook["runner3"] | number: '1.0-0'
                                    }}</strong>
                                  <strong class="text-danger" *ngIf="userBook['runner3'] <= 0">{{
                                      userBook["runner3"] | number: '1.0-0'
                                    }}</strong>
                                </td>
                                <td class="col-1 border-top">
                                  <strong class="text-success" *ngIf="userBook['runner2'] > 0">{{
                                      userBook["runner2"] | number: '1.0-0'
                                    }}</strong>
                                  <strong class="text-danger" *ngIf="userBook['runner2'] <= 0">{{
                                      userBook["runner2"] | number: '1.0-0'
                                    }}</strong>
                                </td>
                              </tr>

                              <tr *ngFor="let downline of downlineBooks">
                                <td colspan="6">
                                  <table class="">
                                    <tbody>
                                      <tr class="border-top" *ngIf="downline.marketId == singleAdminBook.marketId">
                                        <td class="col-1">
                                          {{downline.userName}} ({{downline.role}})</td>
                                        <td class="col-1">
                                          <img *ngIf="downline.downline.length>0" src="/assets/images/net_expo.png"
                                            width="12" (click)="downline.isExpanded = !downline.isExpanded" />
                                        </td>
                                        <td class="col-1">
                                        </td>
                                        <td class="col-1">
                                          {{downline.runner1Amount}}</td>
                                        <td class="col-1">
                                          {{downline.runner3Amount}}</td>
                                        <td class="col-1">
                                          {{downline.runner2Amount}}</td>
                                      </tr>

                                      <ng-container *ngIf="downline.isExpanded">
                                        <tr *ngFor="let downline2 of downline.downline">
                                          <td colspan="6">
                                            <table class="">
                                              <tbody>
                                                <tr class="border-top"
                                                  *ngIf="downline2.marketId == singleAdminBook.marketId">
                                                  <td class="col-1">{{downline2.userName}} <br> ({{downline2.role}})
                                                  </td>
                                                  <td class="col-1">
                                                    <img *ngIf="downline2.downline.length>0"
                                                      src="/assets/images/net_expo.png" width="12"
                                                      (click)="downline2.isExpanded = !downline2.isExpanded" />
                                                  </td>
                                                  <td class="col-1"></td>
                                                  <td class="col-1">{{downline2.runner1Amount}}</td>
                                                  <td class="col-1">{{downline2.runner3Amount}}</td>
                                                  <td class="col-1">{{downline2.runner2Amount}}</td>
                                                </tr>

                                                <ng-container *ngIf="downline2.isExpanded">
                                                  <tr *ngFor="let downline3 of downline2.downline">
                                                    <td colspan="6">
                                                      <table class="">
                                                        <tbody>
                                                          <tr class="border-top"
                                                            *ngIf="downline3.marketId == singleAdminBook.marketId">
                                                            <td class="col-1">{{downline3.userName}}
                                                              ({{downline3.role}})</td>
                                                            <td class="col-1">
                                                              <img *ngIf="downline3.downline.length>0"
                                                                src="/assets/images/net_expo.png" width="12"
                                                                (click)="downline3.isExpanded = !downline3.isExpanded" />
                                                            </td>
                                                            <td class="col-1"></td>
                                                            <td class="col-1">{{downline3.runner1Amount}}</td>
                                                            <td class="col-1">{{downline3.runner3Amount}}</td>
                                                            <td class="col-1">{{downline3.runner2Amount}}</td>
                                                          </tr>

                                                          <ng-container *ngIf="downline3.isExpanded">
                                                            <tr *ngFor="let downline4 of downline3.downline">
                                                              <td colspan="6">
                                                                <table class="">
                                                                  <tbody>
                                                                    <tr class="border-top"
                                                                      *ngIf="downline4.marketId == singleAdminBook.marketId">
                                                                      <td class="col-1">{{downline4.userName}} <br>
                                                                        ({{downline4.role}})</td>
                                                                      <td class="col-1">
                                                                        <img *ngIf="downline4.downline.length>0"
                                                                          src="/assets/images/net_expo.png" width="12"
                                                                          (click)="downline4.isExpanded = !downline4.isExpanded" />
                                                                      </td>
                                                                      <td class="col-1"></td>
                                                                      <td class="col-1">{{downline4.runner1Amount}}
                                                                      </td>
                                                                      <td class="col-1">{{downline4.runner3Amount}}
                                                                      </td>
                                                                      <td class="col-1">{{downline4.runner2Amount}}
                                                                      </td>
                                                                    </tr>

                                                                    <ng-container *ngIf="downline4.isExpanded">
                                                                      <tr *ngFor="let downline5 of downline4.downline">
                                                                        <td colspan="6">
                                                                          <table class="">
                                                                            <tbody>
                                                                              <tr class="border-top"
                                                                                *ngIf="downline5.marketId == singleAdminBook.marketId">
                                                                                <td class="col-1">
                                                                                  {{downline5.userName}}
                                                                                  ({{downline5.role}})</td>
                                                                                <td class="col-1">
                                                                                  <img
                                                                                    *ngIf="downline5.downline.length>0"
                                                                                    src="/assets/images/net_expo.png"
                                                                                    width="12"
                                                                                    (click)="downline5.isExpanded = !downline5.isExpanded" />
                                                                                </td>
                                                                                <td class="col-1"></td>
                                                                                <td class="col-1">
                                                                                  {{downline5.runner1Amount}}</td>
                                                                                <td class="col-1">
                                                                                  {{downline5.runner3Amount}}</td>
                                                                                <td class="col-1">
                                                                                  {{downline5.runner2Amount}}</td>
                                                                              </tr>

                                                                              <ng-container
                                                                                *ngIf="downline5.isExpanded">
                                                                                <tr class="border-top"
                                                                                  *ngFor="let downline6 of downline5.downline">
                                                                                  <td colspan="6">
                                                                                    <table class="">
                                                                                      <tbody>
                                                                                        <tr
                                                                                          *ngIf="downline6.marketId == singleAdminBook.marketId">
                                                                                          <td class="col-1">
                                                                                            {{downline6.userName}} <br>
                                                                                            ({{downline6.role}})</td>
                                                                                          <td class="col-1">
                                                                                            <img
                                                                                              *ngIf="downline6.downline.length>0"
                                                                                              src="/assets/images/net_expo.png"
                                                                                              width="12"
                                                                                              (click)="downline6.isExpanded = !downline6.isExpanded" />
                                                                                          </td>
                                                                                          <td class="col-1"></td>
                                                                                          <td class="col-1">
                                                                                            {{downline6.runner1Amount}}
                                                                                          </td>
                                                                                          <td class="col-1">
                                                                                            {{downline6.runner3Amount}}
                                                                                          </td>
                                                                                          <td class="col-1">
                                                                                            {{downline6.runner2Amount}}
                                                                                          </td>
                                                                                        </tr>
                                                                                      </tbody>
                                                                                    </table>
                                                                                  </td>
                                                                                </tr>
                                                                              </ng-container>

                                                                            </tbody>
                                                                          </table>
                                                                        </td>
                                                                      </tr>
                                                                    </ng-container>

                                                                  </tbody>
                                                                </table>
                                                              </td>
                                                            </tr>
                                                          </ng-container>

                                                        </tbody>
                                                      </table>
                                                    </td>
                                                  </tr>
                                                </ng-container>

                                              </tbody>
                                            </table>
                                          </td>
                                        </tr>
                                      </ng-container>

                                    </tbody>
                                  </table>
                                </td>
                              </tr>


                              <!-- <tr>
                                    
                                  <div *ngIf="downline.isExpanded">
                                    <div *ngFor="let downline2 of downline.downline">
                                      <tr>
                                        <td   class="border-top">{{downline2.userName}} ({{downline2.role}})</td>
                                        <td   class="border-top">
                                          <img *ngIf="downline2.downline.length>0" src="/assets/images/net_expo.png" width="12" (click)="downline2.isExpanded = !downline2.isExpanded" />
                                        </td>
                                        <td   class="border-top"></td>
                                        <td   class="border-top">{{downline2.runner1Amount}}</td>
                                        <td   class="border-top">{{downline2.runner3Amount}}</td>
                                        <td   class="border-top">{{downline2.runner2Amount}}</td>
                                      </tr>

                                      <div *ngIf="downline2.isExpanded">
                                        <div *ngFor="let downline3 of downline2.downline">
                                          <tr>
                                            <td   class="border-top">{{downline3.userName}} ({{downline3.role}})</td>
                                            <td   class="border-top">
                                              <img *ngIf="downline3.downline.length>0" src="/assets/images/net_expo.png" width="12" (click)="downline3.isExpanded = !downline3.isExpanded" />
                                            </td>
                                            <td   class="border-top"></td>
                                            <td   class="border-top">{{downline3.runner1Amount}}</td>
                                            <td   class="border-top">{{downline3.runner3Amount}}</td>
                                            <td   class="border-top">{{downline3.runner2Amount}}</td>
                                          </tr>

                                          <div *ngIf="downline3.isExpanded">
                                            <div *ngFor="let downline4 of downline3.downline">
                                              <tr >
                                                <td   class="border-top">{{downline4.userName}} ({{downline4.role}})</td>
                                                <td   class="border-top">
                                                  <img *ngIf="downline4.downline.length>0" src="/assets/images/net_expo.png" width="12" (click)="downline4.isExpanded = !downline4.isExpanded" />
                                                </td>
                                                <td   class="border-top"></td>
                                                <td   class="border-top">{{downline4.runner1Amount}}</td>
                                                <td   class="border-top">{{downline4.runner3Amount}}</td>
                                                <td   class="border-top">{{downline4.runner2Amount}}</td>
                                              </tr>

                                              <div *ngIf="downline4.isExpanded">
                                                <div *ngFor="let downline5 of downline4.downline">
                                                  <tr >
                                                    <td   class="border-top">{{downline5.userName}} ({{downline5.role}})</td>
                                                    <td   class="border-top">
                                                      <img *ngIf="downline5.downline.length>0" src="/assets/images/net_expo.png" width="12" (click)="downline5.isExpanded = !downline5.isExpanded" />
                                                    </td>
                                                    <td   class="border-top"></td>
                                                    <td   class="border-top">{{downline5.runner1Amount}}</td>
                                                    <td   class="border-top">{{downline5.runner3Amount}}</td>
                                                    <td   class="border-top">{{downline5.runner2Amount}}</td>
                                                  </tr>
      
                                                  <div *ngIf="downline5.isExpanded">
                                                    <div *ngFor="let downline6 of downline5.downline">
                                                      <tr>
                                                        <td   class="border-top">{{downline6.userName}} ({{downline6.role}})</td>
                                                        <td   class="border-top">
                                                          <img *ngIf="downline6.downline.length>0" src="/assets/images/net_expo.png" width="12" (click)="downline6.isExpanded = !downline6.isExpanded" />
                                                        </td>
                                                        <td   class="border-top"></td>
                                                        <td   class="border-top">{{downline6.runner1Amount}}</td>
                                                        <td   class="border-top">{{downline6.runner3Amount}}</td>
                                                        <td   class="border-top">{{downline6.runner2Amount}}</td>
                                                      </tr>

                                                      <div *ngIf="downline6.isExpanded">
                                                        <div *ngFor="let downline7 of downline6.downline">
                                                          <tr>
                                                            <td *ngIf="downline7.marketId == singleAdminBook.marketId"  class="border-top">{{downline7.userName}} ({{downline7.role}})</td>
                                                            <td *ngIf="downline7.marketId == singleAdminBook.marketId"  class="border-top">
                                                              <img *ngIf="downline7.downline.length>0" src="/assets/images/net_expo.png" width="12" (click)="downline7.isExpanded = !downline7.isExpanded" />
                                                            </td>
                                                            <td *ngIf="downline7.marketId == singleAdminBook.marketId"  class="border-top"></td>
                                                            <td *ngIf="downline7.marketId == singleAdminBook.marketId"  class="border-top">{{downline7.runner1Amount}}</td>
                                                            <td *ngIf="downline7.marketId == singleAdminBook.marketId"  class="border-top">{{downline7.runner3Amount}}</td>
                                                            <td *ngIf="downline7.marketId == singleAdminBook.marketId"  class="border-top">{{downline7.runner2Amount}}</td>
                                                          </tr>
                                                        </div>
                                                        
                                                      </div>
                                                    </div>
                                                   
      
                                                    
                                                  </div>
                                                </div>
                                                
                                              </div>
                                            </div>
                                           
  
                                            
                                          </div>
                                        </div>
                                      

                                        
                                      </div>
                                    </div>
                                  </div>
                                  </tr> -->


                              <!-- <tr *ngFor="
                                  let totalBook of singleAdminBook['totalBook']
                                ">
                                <td class="border-top">
                                  {{ totalBook["username"] }}
                                </td>
                                <td class="border-top"></td>
                                <td class="border-top">
                                  <strong>{{ totalBook["stake"] }}</strong>
                                </td>
                                <td class="border-top">
                                  <strong class="text-success" *ngIf="totalBook['runner1'] > 0">{{
                                      totalBook["runner1"] | number: '1.0-0'
                                    }}</strong>
                                  <strong class="text-danger" *ngIf="totalBook['runner1'] <= 0">{{
                                      totalBook["runner1"] | number: '1.0-0'
                                    }}</strong>
                                </td>
                                <td class="border-top">
                                  <strong class="text-success" *ngIf="totalBook['runner3'] > 0">{{
                                      totalBook["runner3"] | number: '1.0-0'
                                    }}</strong>
                                  <strong class="text-danger" *ngIf="totalBook['runner3'] <= 0">{{
                                      totalBook["runner3"] | number: '1.0-0'
                                    }}</strong>
                                </td>
                                <td class="border-top">
                                  <strong class="text-success" *ngIf="totalBook['runner2'] > 0">{{
                                      totalBook["runner2"] | number: '1.0-0'
                                    }}</strong>
                                  <strong class="text-danger" *ngIf="totalBook['runner2'] <= 0">{{
                                      totalBook["runner2"] | number: '1.0-0'
                                    }}</strong>
                                </td>
                              </tr> -->
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="section ">
    <!-- <div class="col-md-12 mt-1 mb-1">
      <div class="row">
        <div class="col-md-6">
          <input type="text" class="form-control bg-dark text-white radius-left-tb border-pink radius-right-tb"
            placeholder="Search Member Name" aria-label="Search" aria-describedby="addon-wrapping"
            [(ngModel)]="searchTerm" (ngModelChange)="search()" />
        </div>
        <div class="col-md-6 text-end">
          <button *ngIf="viewTotal.length > 0" type="button" class="btn btn-pink rounded-pill ms-2 text-white"
            (click)="exportExcel()">
            Export
          </button>
          Bet Count : {{ viewTotal.length }}
        </div>
      </div>
    </div> -->
    <div class="col-md-12 ">
      <div class="tableRes tableFixHead">
        <table class="table tableall">
          <thead>
            <tr>
              <th scope="col" class="">#</th>
              <th scope="col">Member</th>
              <th scope="col">Place time</th>
              <th scope="col-2">Events</th>
              <th scope="col">Market</th>
              <th scope="col">Selection</th>
              <th scope="col">Odds Placed</th>
              <th scope="col">Odds Matched</th>
              <th scope="col">Matched</th>
              <th scope="col">Unmatched</th>
              <th scope="col">Profit/Liability</th>
              <th scope="col" class=" text-center">IP</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let viewTotalEach of viewTotal; let i = index">
              <td class="col">{{ i + 1 }}</td>
              <td class="col">{{ viewTotalEach.userName }}</td>
              <td class="col">
                {{ viewTotalEach.placedDate | date : "mediumTime" }}
              </td>
              <td class="col">{{ viewTotalEach.event | truncate : 33 }}</td>
              <td class="col">
                <span *ngIf="!viewTotalEach.isBack"
                  class="border bg-danger text-danger border-danger me-2 border-3"></span>
                <span *ngIf="viewTotalEach.isBack"
                  class="border bg-primary text-primary border-primary me-2 border-3"></span>
                {{ viewTotalEach.marketName }}
              </td>
              <td class="col">{{ viewTotalEach.selectionName }}</td>
              <td class="col">{{ viewTotalEach.placedOdds }}</td>
              <td class="col">{{ viewTotalEach.betRate }}</td>
              <td class="col">
                <ng-container *ngIf="viewTotalEach.isMatched; else notMatched">
                  {{ viewTotalEach.stake }}
                </ng-container>
                <ng-template #notMatched> -- </ng-template>
              </td>
              <td class="col">
                <ng-container *ngIf="!viewTotalEach.isMatched; else notMatched">
                  {{ viewTotalEach.stake }}
                </ng-container>
                <ng-template #notMatched> -- </ng-template>
              </td>
              <td class="col" [ngClass]="viewTotalEach.isBack ? 'text-danger' : 'text-success'">
                <strong>{{ viewTotalEach.profitLiability }}</strong>
              </td>
              <td class="col tooltipnk">
                <i class="fa-sharp fa-solid fa-info"></i>
                <span class="tooltiptext px-5 w-auto">
                  <small>{{ viewTotalEach.IP }}</small>
                </span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </section>

  <!-- <div *ngIf="viewTotal.length == 0" class="border text-center p-5">
    <h4 *ngIf="viewTotal.length == 0 && !isLoading">No data found</h4>
    <h4 *ngIf="isLoading">Loading...</h4>
  </div> -->
  <div class="row">
    <div class="col-md-12">
      <div *ngIf="viewTotal.length > 0">
        <button class="btn rounded-pill text-white" [disabled]="currentPage === 1" (click)="prev()">
          Prev
        </button>
        <span class="btn btn-pink rounded-pill ps-4 pe-4">{{ currentPage }} / {{ totalPages }}
        </span>
        <button class="btn rounded-pill text-white" [disabled]="currentPage === totalPages" (click)="next()">
          Next
        </button>
      </div>
    </div>
  </div>
</main>

<!--modal Start-->
<div class="modal fade" id="exampleModalToggle" aria-hidden="true" aria-labelledby="exampleModalToggleLabel"
  tabindex="-1">
  <div class="modal-dialog modal-sm">
    <div class="modal-content modalradius">
      <!-- <div class="modal-header">
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div> -->
      <div class="modal-body text-center p-4 pb-3">
        <div class="row border-bottom p-2">
          <div class="col-md-6">Runs</div>
          <div class="col-md-6">P&L</div>
        </div>
        <ng-container *ngIf="ladderObj && ladderObj.length > 0">
          <div *ngFor="let ldr of ladderObj">
            <!-- {{ldr?['amount'] | json}} -->
            <div class="row border-bottom p-2" *ngIf="ldr['position'] != 'last'">
              <div class="col-md-6" *ngIf="ldr['startScore']!=ldr['endScore']">
                {{ ldr['startScore'] }}-{{ ldr['endScore'] }}
              </div>
              <div class="col-md-6" *ngIf="ldr['startScore'] == ldr['endScore']">
                {{ ldr['startScore']}}
              </div>
              <div class="col-md-6">
                <span [ngClass]="
                    ldr['amount'] >= 0 ? 'text-success' : 'text-danger'
                  ">{{ ldr['amount'] }}</span>
              </div>
            </div>
            <div class="row border-bottom p-2 bg-light" *ngIf="ldr['position'] == 'last'">
              <ng-container>
                <div class="col-md-6">{{ ldr['startScore'] }}+</div>
              </ng-container>
              <div class="col-md-6">
                <span [ngClass]="
                    ldr['amount'] >= 0 ? 'text-success' : 'text-danger'
                  ">{{ ldr['amount'] }}</span>
              </div>
            </div>
          </div>

        </ng-container>
        <div class="row">
          <button class="btn col-md-4 mt-3 btn-outline-pink border-0" data-bs-target="#exampleModalToggle2"
            data-bs-toggle="modal" data-bs-dismiss="modal">
            CLOSE
          </button>
        </div>
      </div>
    </div>
  </div>
</div>