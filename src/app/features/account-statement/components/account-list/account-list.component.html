<main id="main" class="main m-0">
    <section class="section dashboard">
      
      
      <div class="row mt-3">
        <div class="col-md-12 overflow-auto">
          <div *ngIf="userList.length == 0" class="border text-center p-5">
            <h4 *ngIf="userList.length == 0 && !isLoading">No data found</h4>
            <h4 *ngIf="isLoading">Loading...</h4>
          </div>
          <div class="table-responsive tableRes tableFixHead">
            <table
              #myTable
              class="table tableall"
              
            >
              <thead>
                <tr>
                  <th scope="col" class="first">
                    <i class="fa-sharp fa-regular fa-address-card"></i>
                  </th>
                  <th
                    scope="col"
                    class="pointer"
                    (click)="toggleSort('username')"
                  >
                    USERNAME
                  </th>
                 
                  <th
                    scope="col"
                    class="text-center pointer"
                    (click)="toggleSort('creditLimit')"
                  >
                    CR
                  </th>
                  
                  
                  <th
                    scope="col"
                    class="text-center pointer"
                    (click)="toggleSort('give')"
                  >
                    PName
                  </th>
                  <th
                    *ngIf="clientId == 1"
                    scope="col"
                    class="text-center pointer"
                    (click)="toggleSort('give')"
                  >
                    ACCOUNT TYPE
                  </th>
                  
                  <th scope="col" class="last text-center">ACTION</th>

                </tr>
              </thead>
              <tbody>
                <h1
                  class="text-center"
                  *ngIf="userList.length == 0 && !this.isLoading"
                >
                  No users Found
                </h1>
                <tr
                  *ngFor="
                    let user of userList | sort : sortColumn : sortAscending;
                    let i = index
                  "
                >
                  <!-- <td>
                    <input
                      type="checkbox"
                      class="pointer"
                      (change)="checkUserForAdjustment(user.userId)"
                      *ngIf="user.take > 0 || user.give > 0"
                      [(ngModel)]="user.state"
                    />
                  </td> -->
                  <td>
                    <span *ngIf="currentPage == 1">{{ i + 1 }}</span>
                    <span *ngIf="currentPage > 1">{{
                      i + 1 + (currentPage - 1) * limit
                    }}</span>
                  </td>
                  <td>
                    <span
                      >{{ user.username }}
                    </span>
                  </td>
                  
                  <td class="text-center">
                    <a (click)="openCredit(user.userId)" class="cursor-pointer">{{ user.creditLimit | indianCurrency }}</a> 
                  </td>
                  
                  <td class="text-center">
                    {{ user.availableCredit | indianCurrency }}
                  </td>
                  <td *ngIf="selectedRoleId != 7" class="text-center">
                    {{ user.partnerShipPercent | indianCurrency }}
                  </td>
  
                  <td class="text-center">
                    <a class="btn btn-success" (click)="openWithdraw(user.userId)">
                      <!-- <i class="fa-sharp fa-solid fa-eye icon-pink pointer"></i> -->
                      D
                    </a>

                    <a class="btn btn-danger"
                    (click)="openDeposit(user.userId)"
                    >
                    W
                      <!-- <i class="fa-sharp fa-solid fa-pen icon-pink pointer"></i> -->
                    </a>
                  </td>
                </tr>
              </tbody>
              
            </table>
          </div>
          <div class="d-flex" *ngIf="userList.length > 0 && !this.isLoading">
            <button
              class="btn rounded-pill text-dark"
              [disabled]="currentPage === 1"
              (click)="prev()"
            >
              Prev
            </button>
            <span class="btn btn-pink rounded-pill ps-4 pe-4"
              >{{ currentPage }} / {{ totalPages }}
            </span>
            <button
              class="btn rounded-pill text-dark"
              [disabled]="currentPage === totalPages"
              (click)="next()"
            >
              Next
            </button>
          </div>
          <!--
          <button [disabled]="currentPage === 1" (click)="prev()">Prev</button><span>{{ currentPage }} / {{ totalPages }}</span><button [disabled]="currentPage === totalPages" (click)="next()">
            Next
          </button> -->
          <!-- <div *ngIf="userList.length > 0 && !this.isLoading"><a class="btn rounded-pill text-white">First</a><a class="btn rounded-pill text-white">Previous</a><a class="btn btn-pink rounded-pill ps-4 pe-4">1</a><a class="btn rounded-pill text-white">Next</a><a class="btn rounded-pill text-white">Last</a></div> -->
        </div>
      </div>
    </section>
  </main>


 <!-- Modal start Deposit-->
  <div
    *ngIf="modalNumber == 1"
    class="modal"
    [ngStyle]="{ display: display }"
    id="staticBackdrop"
    data-bs-backdrop="static"
    data-bs-keyboard="false"
    tabindex="-1"
    aria-labelledby="staticBackdropLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-dialog">
      <div class="modal-content">
        <div class="modal-header bg-pink">
          <h5 class="modal-title cassino" id="staticBackdropLabel">
            DEPOSIT
          </h5>
          <button
            type="button"
            (click)="closeModal()"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
          ></button>
        </div>
        <div class="modal-body">
          <div class="row">
            <section class="section m-auto mt-4">
              <form [formGroup]="changePasswordForm">
                <div class="row mb-4 align-items-center">
                  <div class="col-md-4">OMOFFICE1</div>
                  <div class="col-md-4">
                      <input
                        class="form-control bg-transparent"
                        formControlName="password"
                        placeholder=""
                        id="password"
                        name="password"
                      /> 
                  </div>
                  <div class="col-md-4">
                    <input
                      class="form-control bg-transparent"
                      formControlName="password"
                      placeholder=""
                      id="password"
                      name="password"
                    /> 
                </div>
                </div>

                <div class="row mb-4 align-items-center">
                    <div class="col-md-4">ashu8400</div>
                    <div class="col-md-4">
                        <input
                          class="form-control bg-transparent"
                          formControlName="password"
                          placeholder=""
                          id="password"
                          name="password"
                        /> 
                    </div>
                    <div class="col-md-4">
                      <input
                        class="form-control bg-transparent"
                        formControlName="password"
                        placeholder=""
                        id="password"
                        name="password"
                      /> 
                  </div>
                  </div>

                  <div class="row mb-4 align-items-center">
                    <div class="col-md-4">Profit/Losss</div>
                    <div class="col-md-4">
                        <input
                          class="form-control bg-transparent"
                          formControlName="password"
                          placeholder="Profit/Losss"
                          id="password"
                          name="password"
                        /> 
                    </div>
                    <div class="col-md-4">
                      <input
                        class="form-control bg-transparent"
                        formControlName="password"
                        placeholder="Profit/Losss"
                        id="password"
                        name="password"
                      /> 
                  </div>
                  </div>

                  <div class="row mb-4 align-items-center">
                    <div class="col-md-4">Amount</div>
                    <div class="col-md-8">
                        <input
                          class="form-control bg-transparent"
                          formControlName="password"
                          placeholder="Amount"
                          id="password"
                          name="password"
                        /> 
                    </div>
                  </div>

                  <div class="row mb-4 align-items-center">
                    <div class="col-md-4">Remark</div>
                    <div class="col-md-8">

                        <textarea name="" id="" cols="35" rows="2" placeholder="Remark">

                        </textarea>
                    </div>
                  </div>

                  <div class="row mb-4 align-items-center">
                    <div class="col-md-4">Transaction Code</div>
                    <div class="col-md-8">
                        <input
                          class="form-control bg-transparent"
                          formControlName="password"
                          placeholder="Transaction Code"
                          id="password"
                          name="password"
                        /> 
                    </div>
                  </div>
                
                <div class="row mt-5">
                  <div class="col-md-6 text-end">
                    <button
                      (click)="postChangePassword()"
                      [disabled]="changePasswordForm.invalid"
                      class="btn btn-pink rounded-pill w-80 mt-4"
                    >
                      Save
                    </button>
                  </div>
                  <div class="col-md-6">
                    <button
                      class="btn btn-pink rounded-pill w-80 mt-4"
                      (click)="resetForm()"
                    >
                      Reset
                    </button>
                  </div>
                </div>
              </form>
            </section>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Modal end -->


  <!-- Modal start  Withdraw-->
  <div
    *ngIf="modalNumber == 2"
    class="modal"
    [ngStyle]="{ display: display }"
    id="staticBackdrop"
    data-bs-backdrop="static"
    data-bs-keyboard="false"
    tabindex="-1"
    aria-labelledby="staticBackdropLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-dialog">
      <div class="modal-content">
        <div class="modal-header bg-pink">
          <h5 class="modal-title cassino" id="staticBackdropLabel">
            WITHDRAW
          </h5>
          <button
            type="button"
            (click)="closeModal()"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
          ></button>
        </div>
        <div class="modal-body">
          <div class="row">
            <section class="section m-auto mt-4">
              <form [formGroup]="changePasswordForm">
                <div class="row mb-4 align-items-center">
                  <div class="col-md-4">OMOFFICE1</div>
                  <div class="col-md-4">
                      <input
                        class="form-control bg-transparent"
                        formControlName="password"
                        placeholder=""
                        id="password"
                        name="password"
                      /> 
                  </div>
                  <div class="col-md-4">
                    <input
                      class="form-control bg-transparent"
                      formControlName="password"
                      placeholder=""
                      id="password"
                      name="password"
                    /> 
                </div>
                </div>

                <div class="row mb-4 align-items-center">
                    <div class="col-md-4">ashu8400</div>
                    <div class="col-md-4">
                        <input
                          class="form-control bg-transparent"
                          formControlName="password"
                          placeholder=""
                          id="password"
                          name="password"
                        /> 
                    </div>
                    <div class="col-md-4">
                      <input
                        class="form-control bg-transparent"
                        formControlName="password"
                        placeholder=""
                        id="password"
                        name="password"
                      /> 
                  </div>
                  </div>

                  <div class="row mb-4 align-items-center">
                    <div class="col-md-4">Profit/Losss</div>
                    <div class="col-md-4">
                        <input
                          class="form-control bg-transparent"
                          formControlName="password"
                          placeholder="Profit/Losss"
                          id="password"
                          name="password"
                        /> 
                    </div>
                    <div class="col-md-4">
                      <input
                        class="form-control bg-transparent"
                        formControlName="password"
                        placeholder="Profit/Losss"
                        id="password"
                        name="password"
                      /> 
                  </div>
                  </div>

                  <div class="row mb-4 align-items-center">
                    <div class="col-md-4">Amount</div>
                    <div class="col-md-8">
                        <input
                          class="form-control bg-transparent"
                          formControlName="password"
                          placeholder="Amount"
                          id="password"
                          name="password"
                        /> 
                    </div>
                  </div>

                  <div class="row mb-4 align-items-center">
                    <div class="col-md-4">Remark</div>
                    <div class="col-md-8">

                        <textarea name="" id="" cols="35" rows="2" placeholder="Remark">

                        </textarea>
                    </div>
                  </div>

                  <div class="row mb-4 align-items-center">
                    <div class="col-md-4">Transaction Code</div>
                    <div class="col-md-8">
                        <input
                          class="form-control bg-transparent"
                          formControlName="password"
                          placeholder="Transaction Code"
                          id="password"
                          name="password"
                        /> 
                    </div>
                  </div>
                
                <div class="row mt-5">
                  <div class="col-md-6 text-end">
                    <button
                      (click)="postChangePassword()"
                      [disabled]="changePasswordForm.invalid"
                      class="btn btn-pink rounded-pill w-80 mt-4"
                    >
                      Save
                    </button>
                  </div>
                  <div class="col-md-6">
                    <button
                      class="btn btn-pink rounded-pill w-80 mt-4"
                      (click)="resetForm()"
                    >
                      Reset
                    </button>
                  </div>
                </div>
              </form>
            </section>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Modal end -->


  <!-- Modal start  Credit activity-->
  <div
    *ngIf="modalNumber == 3"
    class="modal"
    [ngStyle]="{ display: display }"
    id="staticBackdrop"
    data-bs-backdrop="static"
    data-bs-keyboard="false"
    tabindex="-1"
    aria-labelledby="staticBackdropLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-dialog">
      <div class="modal-content">
        <div class="modal-header bg-pink">
          <h5 class="modal-title cassino" id="staticBackdropLabel">
            CREDIT ACTIVITY
          </h5>
          <button
            type="button"
            (click)="closeModal()"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
          ></button>
        </div>
        <div class="modal-body">
          <div class="row">
            <section class="section m-auto mt-4">
              <form [formGroup]="changePasswordForm">
                <div class="row mb-4 align-items-center">
                  <div class="col-md-4">OMOFFICE1</div>
                  <div class="col-md-4">
                      <input
                        class="form-control bg-transparent"
                        formControlName="password"
                        placeholder=""
                        id="password"
                        name="password"
                      /> 
                  </div>
                  <div class="col-md-4">
                    <input
                      class="form-control bg-transparent"
                      formControlName="password"
                      placeholder=""
                      id="password"
                      name="password"
                    /> 
                </div>
                </div>

                <div class="row mb-4 align-items-center">
                    <div class="col-md-4">ashu8400</div>
                    <div class="col-md-4">
                        <input
                          class="form-control bg-transparent"
                          formControlName="password"
                          placeholder=""
                          id="password"
                          name="password"
                        /> 
                    </div>
                    <div class="col-md-4">
                      <input
                        class="form-control bg-transparent"
                        formControlName="password"
                        placeholder=""
                        id="password"
                        name="password"
                      /> 
                  </div>
                  </div>

                  <div class="row mb-4 align-items-center">
                    <div class="col-md-4">Profit/Losss</div>
                    <div class="col-md-4">
                        <input
                          class="form-control bg-transparent"
                          formControlName="password"
                          placeholder="Profit/Losss"
                          id="password"
                          name="password"
                        /> 
                    </div>
                    <div class="col-md-4">
                      <input
                        class="form-control bg-transparent"
                        formControlName="password"
                        placeholder="Profit/Losss"
                        id="password"
                        name="password"
                      /> 
                  </div>
                  </div>

                  <div class="row mb-4 align-items-center">
                    <div class="col-md-4">Amount</div>
                    <div class="col-md-8">
                        <input
                          class="form-control bg-transparent"
                          formControlName="password"
                          placeholder="Amount"
                          id="password"
                          name="password"
                        /> 
                    </div>
                  </div>

                  <div class="row mb-4 align-items-center">
                    <div class="col-md-4">Remark</div>
                    <div class="col-md-8">

                        <textarea name="" id="" cols="35" rows="2" placeholder="Remark">

                        </textarea>
                    </div>
                  </div>

                  <div class="row mb-4 align-items-center">
                    <div class="col-md-4">Transaction Code</div>
                    <div class="col-md-8">
                        <input
                          class="form-control bg-transparent"
                          formControlName="password"
                          placeholder="Transaction Code"
                          id="password"
                          name="password"
                        /> 
                    </div>
                  </div>
                
                <div class="row mt-5">
                  <div class="col-md-6 text-end">
                    <button
                      (click)="postChangePassword()"
                      [disabled]="changePasswordForm.invalid"
                      class="btn btn-pink rounded-pill w-80 mt-4"
                    >
                      Save
                    </button>
                  </div>
                  <div class="col-md-6">
                    <button
                      class="btn btn-pink rounded-pill w-80 mt-4"
                      (click)="resetForm()"
                    >
                      Reset
                    </button>
                  </div>
                </div>
              </form>
            </section>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Modal end -->

  


  
  <div class="modal-backdrop fade" *ngIf="showModal"></div>
  
  